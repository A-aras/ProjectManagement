<!-- <p>
  add-task works!
</p> -->

<form [formGroup]="taskForm" class="form-horizontal formStyle" style="margin-top: 100px!important">
  <div class="container-fluid justify-content ">
    <div class="row">
      <div class="col-12">

        <div class="row form-group form-inline">
          <label for="projectInput" class="col-form-label col-1">Project :
          </label>
          <div class="form-group form-inline col-6">
            <input id="projectInput" type="text" placeholder="Project..." class="form-control col-6" [formControl]="projectControl" />
            <!-- <div *ngIf="projectControl.invalid && projectControl.dirty && projectControl.errors?.required" class="alert alert-danger col-6">
              Project is Required
            </div> -->

            <div class="form-group form-inline col-2 col-ignore-padding">
              <button class="btn btn-primary btn-form-margin" style="width: 100%" (click)="onSearchProject()" value="Search">
                Search
              </button>
            </div>
          </div>
        </div>

        <div class="row form-group form-inline">
          <label for="taskInput" class="col-form-label col-1">Task :
          </label>

          <div class="form-group form-inline col-8">
            <input id="taskInput" type="text" placeholder="Project..." class="form-control col-6" [formControl]="taskControl" />
            <div *ngIf="taskControl.invalid && taskControl.dirty && taskControl.errors?.required" class="alert alert-danger col-6">
              Task is Required
            </div>
          </div>
        </div>

        <div class="row form-group form-inline">
          <!-- <div class="form-group form-inline col-1">
              </div> -->
          <!-- <label for="taskInput" class="col-form-label col-2">Task : 
          </label>-->

          <div class="form-group form-inline col-11 offset-1">
            <label class="checkbox-inline col-6 col-ignore-padding form-inline-leftAlign">
              <input type="checkbox" class="form-check-input" [formControl]="isParentTaskControl" />&nbsp;&nbsp;&nbsp; Set as Parent Task</label>
            <!-- <input id="taskInput" type="text" placeholder="Project..." class="form-control col-6" [formControl]="taskControl" />
                <div *ngIf="taskControl.invalid && taskControl.dirty && taskControl.errors?.required" class="alert alert-danger col-6">
                  Task is Required
                </div> -->
          </div>
          <!-- <label for="isParentTaskInput" class="col-form-label col-2"></label> -->
          <!-- <input id="isParentTaskInput" type="checkbox" class="form-check-input"  [formControl]="isParentTaskControl" /> -->
          <!-- <label class="checkbox-inline col-6 col-ignore-padding form-inline-leftAlign">
            <input type="checkbox" class="form-check-input" [formControl]="isParentTaskControl" />&nbsp;&nbsp;&nbsp; Set as Parent Task</label> -->
        </div>

        <div class="row form-group form-inline">
          <label for="taskPriority" class="col-form-label col-1">
            Priority:
          </label>
          <div class="form-group form-inline col-8 col-ignore-padding">
            <!-- <div style="margin-left:10px!important; margin-right: 5px!important">
              <div class="float-left">
                <b>0</b>
              </div>
              <div class="float-right">
                <b>30</b>
              </div>
            </div> -->
            <div class="col-6 form-inline col-ignore-padding">
              <b class="co1-1">0&nbsp;</b> 
              <input type="range" min="0" max="30" class="form-control-range custom-range co1-9" style="width: 90%" id="taskPriority" [formControl]="taskPriorityControl"
              />
              <b class="co1-1">&nbsp;30</b>
            </div>
          </div>
          <div *ngIf="taskPriorityControl.invalid && taskPriorityControl.dirty && taskPriorityControl.errors?.required" class="alert alert-danger col-6">
            Priority is required
          </div>
          <div *ngIf="taskPriorityControl.invalid && taskPriorityControl.dirty  && taskPriorityControl.errors?.min" class="alert alert-danger col-6">
            Priority must be greater than {{ priorityMin }}
          </div>
          <div *ngIf="taskPriorityControl.invalid && taskPriorityControl.dirty  && taskPriorityControl.errors?.max" class="alert alert-danger col-6">
            Priority must be less than {{ priorityMax }}
          </div>
        </div>

        <div class="row form-group form-inline">
          <label for="parentTaskInput" class="col-form-label col-1">Parent Task :
          </label>
          <div class="form-group form-inline col-6">
            <input id="parentTaskInput" type="text" placeholder="Parent Task..." class="form-control col-6" [formControl]="parentTaskControl"
            />

            <div class="form-group form-inline col-6">
              <button class="btn btn-primary btn-action-margin" [disabled]=" model.IsParentTask" (click)="onSearchParentTask()" value="Search">
                Search
              </button>
            </div>
          </div>
        </div>


        <div class="form-group form-inline ">

          <form [formGroup]="dateFormGroup" class="form-horizontal col-12 form-inline-leftAlign">
            <div class="col form-group form-inline col-ignore-padding">

              <label for="startDateInput" class="col-form-label col-1 col-ignore-padding">Start Date :
              </label>

              <div class="form-group form-inline col-2 col-ignore-padding">
                <input id="startDateInput" type="text" placeholder="Start Date" class="form-control col-12" [formControl]="startDateControl"
                  bsDatepicker [bsConfig]="{
                        dateInputFormat: 'DD-MM-YYYY',
                        containerClass: 'theme-dark-blue'
                      }" />
              </div>

              <label for="endDateInput" class="col-form-label col-1 col-ignore-padding">End Date :
              </label>

              <div class="form-group form-inline col-2 col-ignore-padding">
                <input id="endDateInput" type="text" placeholder="Start Date" class="form-control col-12" [formControl]="endDateControl"
                  bsDatepicker [bsConfig]="{
                          dateInputFormat: 'DD-MM-YYYY',
                          containerClass: 'theme-dark-blue'
                        }" />
              </div>

              <div class="col-6">
                <div *ngIf="startDateControl.invalid &&  startDateControl.errors?.required" class="alert alert-danger row">
                  Start Date is Required
                </div>

                <div *ngIf="endDateControl.invalid &&  endDateControl.errors?.required" class="alert alert-danger row">
                  End Date is Required
                </div>

                <div *ngIf="dateFormGroup.invalid && dateFormGroup.dirty" class="alert alert-danger row">
                  To Date must be greater than Start Date
                </div>
              </div>

            </div>
          </form>



        </div>



        <div class="row form-group form-inline">
          <label for="userInput" class="col-form-label col-1">User :
          </label>
          <div class="form-group form-inline col-6">
            <input id="userInput" type="text" placeholder="User..." class="form-control col-6" [formControl]="userControl" />

            <div class="form-group form-inline col-6">
              <button class="btn btn-primary btn-action-margin" [disabled]="model.IsParentTask" (click)="onSearchUser()" value="Search">
                Search
              </button>
            </div>
          </div>
          <div *ngIf="userControl.invalid && userControl.errors?.required" class="alert alert-danger col-5">
            User is Required
          </div>
        </div>


        <div class="col-6">
          <div class="float-right">
            <button class="btn btn-primary btn-action-margin" (click)="onTaskSave()" value="Add Task">{{btnAction}} Task</button>
            <button class="btn btn-primary " value="Reset" type="reset">Reset</button>

            <app-search-module [inputValue]="serarchInputValues" [columnsDisplay]="columnsDisplay" [fieldType]="popupModelType" [searchFields]="searchFields"
              (rowSelected)="HandleRowSelected($event)"></app-search-module>

          </div>
        </div>

      </div>
    </div>
  </div>

  <div class="modal fade" bsModal #alertModal="bs-modal" [config]="{backdrop: 'static'}" tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
        <div class="modal-header">
          <h4 id="dialog-static-name" class="modal-title pull-left">Confirm?</h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="alertModal.hide()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <p>Do you want to {{btnAction}} Task?</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" (click)="confirmAlertModal()">Yes</button>
          <button type="button" class="btn btn-default" (click)="declineAlertModal()">No</button>
        </div>
      </div>
    </div>
  </div>
  <!-- <div class="modal fade" bsModal #searchModal="bs-modal" tabindex="-1" role="dialog" aria-labelledby="dialog-static-name">
    <div class="modal-dialog modal-lg">
      <div class="modal-content">
        <div class="modal-header">
          <h4 id="dialog-static-name" class="modal-title pull-left">
            Select manager for the project
          </h4>
          <button type="button" class="close pull-right" aria-label="Close" (click)="searchModal.hide()">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <app-search-manager [modalDisplayed]='searchModalDisplayed' (rowSelected)="HandleRowSelection($event)"></app-search-manager>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-primary" (click)="confirm()" [disabled]="selectedRow==null">
            Ok
          </button>
          <button type="button" class="btn btn-primary" (click)="decline()">
            Cancel
          </button>
        </div>
      </div>
    </div>
  </div> -->
</form>
